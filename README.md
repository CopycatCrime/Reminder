# <font color=#00ff7f>共同開発時のルール</font>

## 目次

1. [コミットメッセージの書き方](#コミットメッセージの書き方)  
2. [ブランチの役割と命名規則](#ブランチの役割分担と命名規則)
3. [Issueを立てる](#issueを立てる)
4. [クラス・関数・変数の命名規則](#クラス関数変数の命名規則)
5. [コーディング時のルール](#コーディングの時のルール)

## コミットメッセージの書き方

### サンプル

---

[add] admin.pyを追加しました  

<br>

変更内容 : admin.pyをcogs/admin.pyとして追加しました  
備考 :　コマンド`#eval`などを管理します

---

### コミットメッセージのルール詳細

#### <font color=#7fffd4><u>1行目 : すぐに分かるprefixとタイトルをつけてください</u></font>
`[prefix] <タイトル>`として書いてください  
`prefix`については, 以下の中から適当だと思うものを選んで付けて下さい
- `fix` ： バグ修正
- `add` ： 新規（ファイルも含む）機能追加
- `update` ： 機能修正（バグではない）
- `remove` ： 削除（ファイル）  

その後`タイトル`としてそのコミットの概要を簡潔に記述してください  
<font color=#00ff7f>コミットは1つの変更/追加ごとに行ってください</font>
#### <font color=#7fffd4><u>2行目 : 空行としてください</u></font>

#### <font color=#7fffd4><u>3行目 : そのコミットで行われた変更を詳しく簡潔に記述してください</u></font>
`変更内容 : <変更内容を記述>`  
<u>そのコミットでの変更内容をタイトルより詳しく, 簡潔に記入してください</u>  
<font color="red"><u>※この行は必須です</u></font>


#### <font color=#7fffd4><u>4行目以降 : 備考があれば記述してください</u></font>
`備考 : <備考があれば記述>`  
<u>備考があれば詳しく記述して下さい</u>  
<u>この行は任意記述ですが`備考 : `は残しておいてください</u>

## ブランチの役割分担と命名規則

### 各ブランチの役割

`git flow`を用いて管理をします

- `mainブランチ` ： プロダクトとしてリリースする用のブランチ  
<font color="red"><u>※このブランチで作業を行ってはいけません</u></font>
- `developブランチ` ： 開発用ブランチ  
コードが安定し, リリース準備ができたらreleaseへマージする  
<font color="red"><u>※このブランチで作業を行ってはいけません</u></font>
- `featureブランチ` ： 機能の追加用  
developから分岐し, developにマージする
- `hotfixブランチ` ： リリース後の緊急対応（クリティカルなバグフィックスなど）用のブランチ  
masterから分岐しmasterにマージすると共にdevelopにマージする
- `releaseブランチ` : プロダクトリリースの準備用のブランチ  
リリース予定の機能やバグフィックスが反映された状態のdevelopから分岐する  
リリース準備が整ったらmasterにマージすると共にdevelopにマージする  

<font color=#b22222><u>詳しくは開発しながら学んでください</u></font>  
[参考にしたサイト](https://cloudsmith.co.jp/blog/efficient/2020/08/1534208.html)

### ブランチの命名規則

ブランチ名の規則 : `<ブランチ名>/<issue番号> - <タイトルを小文字で指定>`  
例 : `feature/01-joint-rules`  

後述するissueを立ててからブランチを`git flow`コマンドを用いて作成してください  
issue番号がそれぞれに自動で割り振られるので, 頭文字を最初に指定します  
その後, そのfeatureで作業することが明確になるよう, 単語は`-`で区切って小文字で記述してください

例えば, `feature`ブランチにて, 番号が`01`のissueのタイトルを`joint rules`としたい場合,  
`git flow feature start 01-joint-rules`とすることで, 例に挙げたブランチを開始できます

<font color="red"><u>※ブランチを作成する前にissueを立て, そのブランチにおいて何をするのかを明確にしてください</u></font>

## Issueを立てる

[Issues](https://github.com/Ray-Main/joint-project/issues)から`New Issue`をクリックすることでIssueを立てることができます  
新しい機能を追加する / バグを修正するなどの必要が出た場合は必ずIssueを立ててから作業を開始してください  
1つのIssueに対し, 1つの目標を立てて, それを`Title`に記述してください`例 : 共同開発時のルールを決める`  
`Leave a comment`について, それについて詳細にかつ簡潔に記述してください  
他の人のIssueをみて不明なことがある場合はそのIssueで議論することもできます

<font color="red"><u>※目標はcommitほど細かくする必要はありません</u></font>  
例えば, Issueとして`コマンド#evalを追加する`とした場合, それに関連するcommitは
`[add] ファイルの追加`, `[add] コマンド#evalを追加`, `[change] コマンド#evalの仕様変更`,
`[add] コマンド#evalを登録`のような形になります.

## pythonの命名規則

以下PEP8において決められています

|  対象   |          ルール          |          例          |
|:-----:|:---------------------:|:-------------------:|
| パッケージ | 全小文字 なるべく短くアンダースコア非推奨 | tqdm, requests ...  |
| モジュール |  全小文字 なるべく短くアンダースコア可  |     sys, os,...     |
|  クラス  |    最初大文字 + 大文字区切り     |   MyFavoriteClass   |
|  例外   |    	最初大文字 + 大文字区切り    |   MyFuckingError    |
|  型変数  |    最初大文字 + 大文字区切り     |   MyFavoriteType    |
| メソッド  |   全小文字 + アンダースコア区切り   | my_favorite_method  |
|  関数   |   全小文字 + アンダースコア区切り   | my_favorite_funcion |
|  変数   |   全小文字 + アンダースコア区切り   | my_favorite_funcion |
|  定数   |   全大文字 + アンダースコア区切り   |  MY_FAVORITE_CONST  |

- ファイル名 = モジュール名+.py ( or .pyw)
- C/C++ のモジュールはアンダースコアで開始
- 自クラス内でのみ使用する内部変数と内部メソッドはアンダースコアで開始

<u>見やすいコードを書くために</u>  
- 単語は省略しない（慣例的に省略して使われている名前はOK）
- 名前に情報・意味を込める（flag, check では何のフラグか、何をチェックしたどんな値か分からない）
- 名前で情報を伝えてコメント不要にする（コメントにはwhatではなくwhyを書く）
- 1文字変数は1画面で見渡せる範囲（25行以内）で使い終わる一時変数に使う

[抜粋元](https://qiita.com/shiracamus/items/bc3bdfc206b39e0a75b2)
## コーディングの時のルール

以下の例に示したように, クラスや関数の役割を関数名の真下に, 受け取るべき型を型アノテーションとして指定してください

```python
player_list = []

class MyError(Exception):
    """〇〇〇の時に発生するエラー"""
    
    pass

# 省略

def is_player(player_id: int) -> bool:
    """コマンド送信者のIDを受け取り, ゲームに参加しているかを判定します."""

    # player_idがplayer_listの中に格納されているかをチェックする(これは読めばわかるから不要かな...)
    if player_id in player_list:
        return True
    return False
```

その他, 必要なことや仕様をコメントアウト`#`を用いて記載してください  
なお, 上の例のような超単純な処理にはコメントアウトは不要です  
複雑な処理などにコメントアウトして詳細を記述してください



<font color=#7fffd4><u>
バグが見つかったとき, リファクタリングをするときに便利です  
また, コードレビューでも便利なので適宜追加してください
</u></font>
